<?xml-model href="http://hl7.org/fhir/STU3/testscript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TestScript xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir http://hl7.org/fhir/STU3/testscript.xsd" xmlns="http://hl7.org/fhir">
  <id value="regression-kt-134-fhir3-0-1-clear-resources-delete-xml" />
  <url value="http://nictiz.nl/fhir/fhir3-0-1/TestScript/regression-kt-134-fhir3-0-1-clear-resources-delete-xml" />
  <name value="Regression kt-134 Test Resources - Delete - XML" />
  <status value="active" />
  <date value="2020-01-22" />
  <publisher value="Nictiz" />
  <contact>
    <name value="Nictiz" />
    <telecom>
      <system value="email" />
      <value value="kwalificatie@nictiz.nl" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="Clear (delete) missing resource. Should yield: HTTP 204. See https://bits.nictiz.nl/browse/KT-134" />
  <copyright value="Â© Nictiz 2020" />
  
  <fixture id="organization-kt-134-fx">
    <resource>
      <reference value="../_reference/organization-kt-134.xml" />
    </resource>
  </fixture>
  <variable>
    <name value="organization-kt-134-id" />
    <expression value="Organization.id" />
    <sourceId value="organization-kt-134-fx" />
  </variable>
  <test id="Step1-ResourceDelete">
    <name value="Step1-ResourceDelete" />
    <description value="Delete missing test resource." />
    <action>
      <operation>
        <type>
          <system value="http://hl7.org/fhir/testscript-operation-codes" />
          <code value="delete" />
        </type>
        <resource value="Location" />
        <accept value="xml" />
        <contentType value="xml" />
        <params value="/${organization-kt-134-id}" />
        <requestHeader>
          <field value="Authorization" />
          <value value="Bearer 2588b52d-c5ef-4cfa-84d4-acf8419a72e9" />
        </requestHeader>
        <sourceId value="organization-kt-134-fx" />
      </operation>
    </action>   
    <action>
      <assert>
        <description value="Confirm that the returned HTTP status is 204." />
        <operator value="equals" />
        <responseCode value="204" />
      </assert>
    </action>
  </test>
</TestScript>