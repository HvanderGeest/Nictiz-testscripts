<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
   <id value="phr-1-1-retrieve-ggz"/>
   <meta>
      <profile value="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript"/>
   </meta>
   <url value="http://nictiz.nl/fhir/TestScript/phr-1-1-retrieve-ggz"/>
   <version value="stu3-2.0-patchlevel 2022-08"/>
   <name value="BgGGZ - PHR Client - Scenario 1.1 - Retrieve all GGZ resources of person 1"/>
   <status value="active"/>
   <publisher value="Nictiz"/>
   <contact>
      <name value="Nictiz"/>
      <telecom>
         <system value="email"/>
         <value value="kwalificatie@nictiz.nl"/>
         <use value="work"/>
      </telecom>
   </contact>
   <description value="Scenario 1.1 - Retrieve all GGZ information of person 1"/>
   <origin>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"/>
         <code value="FHIR-Client"/>
      </profile>
   </origin>
   <destination>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"/>
         <code value="FHIR-Server"/>
      </profile>
   </destination>
   <fixture id="patient-token-fixture">
      <autocreate value="false"/>
      <autodelete value="false"/>
      <resource>
         <reference value="../_reference/ggz-nl-core-patient-XXX-Bals-token.xml"/>
      </resource>
   </fixture>
   <variable>
      <name value="patient-token-id"/>
      <expression value="Patient.id"/>
      <sourceId value="patient-token-fixture"/>
   </variable>
   <test id="01-retrieve-Patient">
      <name value="Scenario 1.1 - Patient"/>
      <description value="Query Patient resource including the patient's general practitioner for HCIM Patient"/>
   </test>
   <test id="02-retrieve-Payer">
      <name value="Scenario 1.1 - Payer"/>
      <description value="Query Coverage resource(s) including the insurer for HCIM Payer"/>
   </test>
   <test id="03-retrieve-TreatmentDirective">
      <name value="Scenario 1.1 - TreatmentDirective"/>
      <description value="Query Consent resource(s) for HCIM TreatmentDirective"/>
   </test>
   <test id="04-retrieve-AdvanceDirective">
      <name value="Scenario 1.1 - AdvanceDirective"/>
      <description value="Query Consent resource(s) for HCIM AdvanceDirective"/>
   </test>
   <test id="05-retrieve-FunctionalOrMentalStatus">
      <name value="Scenario 1.1 - FunctionalOrMentalStatus"/>
      <description value="Query Observation resource(s) for HCIM FunctionalOrMentalStatus"/>
   </test>
   <test id="06-retrieve-Problem">
      <name value="Scenario 1.1 - Problem"/>
      <description value="Query Condition resource(s) for HCIM Problem"/>
   </test>
   <test id="07-retrieve-DrugUse">
      <name value="Scenario 1.1 - DrugUse"/>
      <description value="Query Observation resource(s) for HCIM DrugUse"/>
   </test>
   <test id="08-retrieve-AlcoholUse">
      <name value="Scenario 1.1 - AlcoholUse"/>
      <description value="Query Observation resource(s) for HCIM AlcoholUse"/>
   </test>
   <test id="09-retrieve-TobaccoUse">
      <name value="Scenario 1.1 - TobaccoUse"/>
      <description value="Query Observation resource(s) for HCIM TobaccoUse"/>
   </test>
   <test id="10-retrieve-LivingSituation">
      <name value="Scenario 1.1 - LivingSituation"/>
      <description value="Query Observation resource(s) for HCIM LivingSituation"/>
   </test>
   <test id="11-retrieve-FamilySituation">
      <name value="Scenario 1.1 - FamilySituation"/>
      <description value="Query Observation resource(s) for HCIM FamilySituation"/>
   </test>
   <test id="12-retrieve-ParticipationInSociety">
      <name value="Scenario 1.1 - ParticipationInSociety"/>
      <description value="Query Observation resource(s) for HCIM ParticipationInSociety"/>
   </test>
   <test id="13-retrieve-HelpFromOthers">
      <name value="Scenario 1.1 - HelpFromOthers"/>
      <description value="Query CarePlan resource(s) for HCIM HelpFromOthers"/>
   </test>
   <test id="14-retrieve-LaboratoryTestResult">
      <name value="Scenario 1.1 - LaboratoryTestResult"/>
      <description value="Query Observation resource(s) for the last known chemistry HCIM LaboratoryTestResult"/>
   </test>
   <test id="15-retrieve-GeneralMeasurement">
      <name value="Scenario 1.1 - GeneralMeasurement"/>
      <description value="Query Observation resource(s) for survey HCIM GeneralMeasurement"/>
   </test>
   <test id="16-retrieve-Procedure">
      <name value="Scenario 1.1 - Procedure"/>
      <description value="Query Procedure resource(s) for HCIM Procedure"/>
   </test>
   <test id="17-retrieve-TextResult">
      <name value="Scenario 1.1 - TextResult"/>
      <description value="Query DiagnosticReport resource(s) for HCIM TextResult"/>
   </test>
   <test id="18-retrieve-CareTeam">
      <name value="Scenario 1.1 - CareTeam"/>
      <description value="Query CateTeam resource(s) including the participants "/>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the returned searchset Bundle contains 4 entries."/>
            <direction value="response"/>
            <expression value="Bundle.entry.count() = 4"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
</TestScript>
