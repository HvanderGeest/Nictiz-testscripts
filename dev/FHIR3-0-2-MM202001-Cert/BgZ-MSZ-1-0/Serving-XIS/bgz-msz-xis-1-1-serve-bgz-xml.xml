<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
   <id value="bgz-msz-xis-1-1-serve-bgz-xml"/>
   <meta>
      <profile value="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript"/>
   </meta>
   <url value="http://nictiz.nl/fhir/TestScript/bgz-msz-xis-1-1-serve-bgz-xml"/>
   <version value="stu3-3.0-patchlevel 2022-09"/>
   <name value="BgZ MSZ - Serving XIS - Scenario 1.1 - Serve BgZ resources of D Janse - XML Format"/>
   <status value="active"/>
   <publisher value="Nictiz"/>
   <contact>
      <name value="Nictiz"/>
      <telecom>
         <system value="email"/>
         <value value="kwalificatie@nictiz.nl"/>
         <use value="work"/>
      </telecom>
   </contact>
   <description value="Scenario 1.1 - Serve BgZ resources of D Janse"/>
   <origin>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"/>
         <code value="FHIR-Client"/>
      </profile>
   </origin>
   <destination>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"/>
         <code value="FHIR-Server"/>
      </profile>
   </destination>
   <variable>
      <name value="patient-token-id"/>
      <defaultValue value="Bearer b4917a9e-462f-11ed-b878-0242ac120002"/>
      <description value="OAuth Token for current patient"/>
   </variable>
   <test id="01-serve-Patient">
      <name value="Scenario 1.1 - Patient"/>
      <description value="Serve Patient resource including the patient's general practitioner for HCIM Patient"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Patient"/>
            <description value="Test XIS server to serve Patient resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?_include=Patient:general-practitioner"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Patient resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Patient)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Practitioner resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Practitioner)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="02-serve-Payer">
      <name value="Scenario 1.1 - Payer"/>
      <description value="Serve Coverage resource(s) including the insurer for HCIM Payer"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Coverage"/>
            <description value="Test XIS server to serve Coverage resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?_include=Coverage:payor:Patient&amp;_include=Coverage:payor:Organization"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Coverage resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Coverage)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Organization resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Organization)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="03a-serve-TreatmentDirective">
      <name value="Scenario 1.1 - TreatmentDirective"/>
      <description value="Serve Consent resource(s) for HCIM TreatmentDirective"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Consent"/>
            <description value="Test XIS server to serve Consent resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?category=http://snomed.info/sct|11291000146105"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Consent resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Consent)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="03b-serve-AdvanceDirective">
      <name value="Scenario 1.1 - AdvanceDirective"/>
      <description value="Serve Consent resource(s) for HCIM AdvanceDirective"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Consent"/>
            <description value="Test XIS server to serve Consent resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?category=http://snomed.info/sct|11341000146107"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Consent resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Consent)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="04-serve-ContactPerson">
      <name value="Scenario 1.1 - ContactPerson"/>
      <description value="Serve RelatedPerson resource(s) for HCIM ContactPerson"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="RelatedPerson"/>
            <description value="Test XIS server to serve RelatedPerson resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 RelatedPerson resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(RelatedPerson)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="05-serve-FunctionalOrMentalStatus">
      <name value="Scenario 1.1 - FunctionalOrMentalStatus"/>
      <description value="Serve Observation resource(s) for HCIM FunctionalOrMentalStatus"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?category=http://snomed.info/sct|118228005,http://snomed.info/sct|384821006"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 3 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 3"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="06-serve-Problem">
      <name value="Scenario 1.1 - Problem"/>
      <description value="Serve Condition resource(s) for HCIM Problem"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Condition"/>
            <description value="Test XIS server to serve Condition resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 5 Condition resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Condition)).count() = 5"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="07a-serve-LivingSituation">
      <name value="Scenario 1.1 - LivingSituation"/>
      <description value="Serve Observation resource(s) for last known HCIM LivingSituation"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?code=http://snomed.info/sct|365508006"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="07b-serve-DrugUse">
      <name value="Scenario 1.1 - DrugUse"/>
      <description value="Serve Observation resource(s) for HCIM DrugUse"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?code=http://snomed.info/sct|228366006"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="07c-serve-AlcoholUse">
      <name value="Scenario 1.1 - AlcoholUse"/>
      <description value="Serve Observation resource(s) for HCIM AlcoholUse"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?code=http://snomed.info/sct|228273003"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="07d-serve-TobaccoUse">
      <name value="Scenario 1.1 - TobaccoUse"/>
      <description value="Serve Observation resource(s) for HCIM TobaccoUse"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?code=http://snomed.info/sct|365980008"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="07e-serve-NutritionAdvice">
      <name value="Scenario 1.1 - NutritionAdvice"/>
      <description value="Serve NutritionOrder resource(s) for HCIM NutritionAdvice"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="NutritionOrder"/>
            <description value="Test XIS server to serve NutritionOrder resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 0 NutritionOrder resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(NutritionOrder)).count() = 0"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="08-serve-Alert">
      <name value="Scenario 1.1 - Alert"/>
      <description value="Serve Flag resource(s) for HCIM Alert"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Flag"/>
            <description value="Test XIS server to serve Flag resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 Flag resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Flag)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="09-serve-AllergyIntolerance">
      <name value="Scenario 1.1 - AllergyIntolerance"/>
      <description value="Serve AllergyIntolerance resource(s) for HCIM AllergyIntolerance"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="AllergyIntolerance"/>
            <description value="Test XIS server to serve AllergyIntolerance resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 3 AllergyIntolerance resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(AllergyIntolerance)).count() = 3"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="11-serve-MedicalDevice">
      <name value="Scenario 1.1 - MedicalDevice"/>
      <description value="Serve DeviceUseStatement resource(s) including the device for HCIM MedicalDevice"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="DeviceUseStatement"/>
            <description value="Test XIS server to serve DeviceUseStatement resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?_include=DeviceUseStatement:device"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 DeviceUseStatement resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(DeviceUseStatement)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 Device resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Device)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="12-serve-Vaccination">
      <name value="Scenario 1.1 - Vaccination"/>
      <description value="Serve Immunization resource(s) for HCIM Vaccination"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Immunization"/>
            <description value="Test XIS server to serve Immunization resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?status=completed"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 Immunization resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Immunization)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="13a-serve-BloodPressure">
      <name value="Scenario 1.1 - BloodPressure"/>
      <description value="Serve Observation resource(s) for last known HCIM BloodPressure"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?code=http://loinc.org|85354-9"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="13b-serve-BodyWeight">
      <name value="Scenario 1.1 - BodyWeight"/>
      <description value="Serve Observation resource(s) for last known HCIM BodyWeight"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?code=http://loinc.org|29463-7"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="13c-serve-BodyHeight">
      <name value="Scenario 1.1 - BodyHeight"/>
      <description value="Serve Observation resource(s) for last known HCIM BodyHeight"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="/$lastn?code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 1 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 1"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="14-serve-LaboratoryTestResult">
      <name value="Scenario 1.1 - LaboratoryTestResult"/>
      <description value="Serve Observation resource(s) including specimen and related observations for chemistry related HCIM LaboratoryTestResult"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Observation"/>
            <description value="Test XIS server to serve Observation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?category=http://snomed.info/sct|275711006&amp;_include=Observation:related-target&amp;_include=Observation:specimen"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 5 Observation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Observation)).count() = 5"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 Specimen resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Specimen)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="15-serve-Procedure">
      <name value="Scenario 1.1 - Procedure"/>
      <description value="Serve Procedure resource(s) for HCIM Procedure"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Procedure"/>
            <description value="Test XIS server to serve Procedure resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 0 Procedure resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Procedure)).count() = 0"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="16-serve-Contact">
      <name value="Scenario 1.1 - Contact"/>
      <description value="Serve Encounter resource(s) for HCIM Contact"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Encounter"/>
            <description value="Test XIS server to serve Encounter resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 3 Encounter resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Encounter)).count() = 3"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="17a-serve-PlannedCareActivity-ProcedureRequest">
      <name value="Scenario 1.1 - PlannedCareActivity-ProcedureRequest"/>
      <description value="Serve ProcedureRequest resource(s) for active HCIM PlannedCareActivity-ProcedureRequest"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="ProcedureRequest"/>
            <description value="Test XIS server to serve ProcedureRequest resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?status=active"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 ProcedureRequest resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(ProcedureRequest)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="17b-serve-PlannedCareActivity-ImmunizationRecommendation">
      <name value="Scenario 1.1 - PlannedCareActivity-ImmunizationRecommendation"/>
      <description value="Serve ImmunizationRecommendation resource(s) for HCIM PlannedCareActivity-ImmunizationRecommendation"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="ImmunizationRecommendation"/>
            <description value="Test XIS server to serve ImmunizationRecommendation resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 2 ImmunizationRecommendation resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(ImmunizationRecommendation)).count() = 2"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="17c-serve-PlannedCareActivity-DeviceRequest">
      <name value="Scenario 1.1 - PlannedCareActivity-DeviceRequest"/>
      <description value="Serve DeviceRequest resource(s) for HCIM PlannedCareActivity-DeviceRequest"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="DeviceRequest"/>
            <description value="Test XIS server to serve DeviceRequest resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?status=active&amp;_include=DeviceRequest:device"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 0 DeviceRequest resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(DeviceRequest)).count() = 0"/>
            <warningOnly value="false"/>
         </assert>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 0 Device resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Device)).count() = 0"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
   <test id="17d-serve-PlannedCareActivity-Appointment">
      <name value="Scenario 1.1 - PlannedCareActivity-Appointment"/>
      <description value="Serve Appointment resource(s) for HCIM PlannedCareActivity-Appointment"/>
      <action>
         <operation>
            <type>
               <system value="http://terminology.hl7.org/CodeSystem/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="Appointment"/>
            <description value="Test XIS server to serve Appointment resources."/>
            <accept value="xml"/>
            <destination value="1"/>
            <encodeRequestUrl value="true"/>
            <origin value="1"/>
            <params value="?status=booked,pending,proposed"/>
         </operation>
      </action>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the response Bundle contains 0 Appointment resource(s). "/>
            <direction value="response"/>
            <expression value="Bundle.entry.where(resource.is(Appointment)).count() = 0"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
</TestScript>
