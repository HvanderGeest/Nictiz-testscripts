<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
   <id value="xis-1-1-serve-ggz-json"/>
   <meta>
      <profile value="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript"/>
   </meta>
   <url value="http://nictiz.nl/fhir/TestScript/xis-1-1-serve-ggz-json"/>
   <version value="stu3-2.0-patchlevel 2022-08"/>
   <name value="BgGGZ - XIS Server - Scenario 1.1 - Serve all GGZ resources of person 1 - JSON Format"/>
   <status value="active"/>
   <publisher value="Nictiz"/>
   <contact>
      <name value="Nictiz"/>
      <telecom>
         <system value="email"/>
         <value value="kwalificatie@nictiz.nl"/>
         <use value="work"/>
      </telecom>
   </contact>
   <description value="Scenario 1.1 - Serve all GGZ information of person 1"/>
   <origin>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types"/>
         <code value="FHIR-Client"/>
      </profile>
   </origin>
   <destination>
      <index value="1"/>
      <profile>
         <system value="http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types"/>
         <code value="FHIR-Server"/>
      </profile>
   </destination>
   <variable>
      <name value="patient-token-id"/>
      <defaultValue value="Bearer 6fc70c51-bdda-422e-9eaa-899fe24c4ef9"/>
      <description value="OAuth Token for current patient"/>
   </variable>
   <test id="01-serve-Patient">
      <name value="Scenario 1.1 - Patient"/>
      <description value="Serve Patient resource including the patient's general practitioner for HCIM Patient"/>
   </test>
   <test id="02-serve-Payer">
      <name value="Scenario 1.1 - Payer"/>
      <description value="Serve Coverage resource(s) including the insurer for HCIM Payer"/>
   </test>
   <test id="03-serve-TreatmentDirective">
      <name value="Scenario 1.1 - TreatmentDirective"/>
      <description value="Serve Consent resource(s) for HCIM TreatmentDirective"/>
   </test>
   <test id="04-serve-AdvanceDirective">
      <name value="Scenario 1.1 - AdvanceDirective"/>
      <description value="Serve Consent resource(s) for HCIM AdvanceDirective"/>
   </test>
   <test id="05-serve-FunctionalOrMentalStatus">
      <name value="Scenario 1.1 - FunctionalOrMentalStatus"/>
      <description value="Serve Observation resource(s) for HCIM FunctionalOrMentalStatus"/>
   </test>
   <test id="06-serve-Problem">
      <name value="Scenario 1.1 - Problem"/>
      <description value="Serve Condition resource(s) for HCIM Problem"/>
   </test>
   <test id="07-serve-DrugUse">
      <name value="Scenario 1.1 - DrugUse"/>
      <description value="Serve Observation resource(s) for HCIM DrugUse"/>
   </test>
   <test id="08-serve-AlcoholUse">
      <name value="Scenario 1.1 - AlcoholUse"/>
      <description value="Serve Observation resource(s) for HCIM AlcoholUse"/>
   </test>
   <test id="09-serve-TobaccoUse">
      <name value="Scenario 1.1 - TobaccoUse"/>
      <description value="Serve Observation resource(s) for HCIM TobaccoUse"/>
   </test>
   <test id="10-serve-LivingSituation">
      <name value="Scenario 1.1 - LivingSituation"/>
      <description value="Serve Observation resource(s) for HCIM LivingSituation"/>
   </test>
   <test id="11-serve-FamilySituation">
      <name value="Scenario 1.1 - FamilySituation"/>
      <description value="Serve Observation resource(s) for HCIM FamilySituation"/>
   </test>
   <test id="12-serve-ParticipationInSociety">
      <name value="Scenario 1.1 - ParticipationInSociety"/>
      <description value="Serve Observation resource(s) for HCIM ParticipationInSociety"/>
   </test>
   <test id="13-serve-HelpFromOthers">
      <name value="Scenario 1.1 - HelpFromOthers"/>
      <description value="Serve CarePlan resource(s) for HCIM HelpFromOthers"/>
   </test>
   <test id="14-serve-LaboratoryTestResult">
      <name value="Scenario 1.1 - LaboratoryTestResult"/>
      <description value="Serve Observation resource(s) for the last known chemistry HCIM LaboratoryTestResult"/>
   </test>
   <test id="15-serve-GeneralMeasurement">
      <name value="Scenario 1.1 - GeneralMeasurement"/>
      <description value="Serve Observation resource(s) for survey HCIM GeneralMeasurement"/>
   </test>
   <test id="16-serve-Procedure">
      <name value="Scenario 1.1 - Procedure"/>
      <description value="Serve Procedure resource(s) for HCIM Procedure"/>
   </test>
   <test id="17-serve-TextResult">
      <name value="Scenario 1.1 - TextResult"/>
      <description value="Serve DiagnosticReport resource(s) for HCIM TextResult"/>
   </test>
   <test id="18-serve-CareTeam">
      <name value="Scenario 1.1 - CareTeam"/>
      <description value="Serve CateTeam resource(s) including the participants "/>
      <action>
         <assert>
            <extension url="http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail">
               <valueBoolean value="false"/>
            </extension>
            <description value="Confirm that the returned searchset Bundle contains at least 4 entries (1 CareTeam resource and 3 Practitioner resources). The asserts checks for a minimum of 4 entries because it possible to include the referenced Organization and PractitionerRole resources in the searchset Bundle resulting in more entries."/>
            <direction value="response"/>
            <expression value="Bundle.entry.count() &gt;= 4"/>
            <warningOnly value="false"/>
         </assert>
      </action>
   </test>
</TestScript>
