<nts:component  xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <nts:parameter name="warningOnly" value="true"/>
    <action>
        <assert>
            <description value="Confirm that the returned searchset Bundle contains the MedicationRequest resource for this specific subscenario."/>
            <direction value="response"/>
            <expression value="Bundle.entry.select(resource as MedicationRequest).medication.ofType('Reference').resolve().code.coding.where($this.code = '{$productCode}' and $this.system = '{$productSystem}').exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>
    <action>
        <assert>
            <description value="Confirm that the returned searchset Bundle contains the MedicationRequest resource for this specific subscenario."/>
            <direction value="response"/>
            <expression value="Bundle.entry.select(resource as MedicationRequest).medication.ofType('Reference').resolve().exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>
    <action>
        <assert>
            <description value="Confirm that the returned searchset Bundle contains the MedicationRequest resource for this specific subscenario."/>
            <direction value="response"/>
            <expression value="Bundle.entry.select(resource as MedicationRequest).medication.ofType('Reference').resolve().Medication.code.exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>
    <action>
        <assert>
            <description value="Confirm that the returned searchset Bundle contains the MedicationRequest resource for this specific subscenario."/>
            <direction value="response"/>
            <expression value="Bundle.entry.select(resource as MedicationRequest).medication.ofType('Reference').resolve().code.exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>
    <action>
        <assert>
            <description value="Confirm that the returned searchset Bundle contains the Medication resource for this specific subscenario."/>
            <direction value="response"/>
            <expression value="Bundle.entry.select(resource as Medication).code.coding.where($this.code = '{$productCode}' and $this.system = '{$productSystem}').exists()"/>
            <warningOnly value="{$warningOnly}"/>
        </assert>
    </action>
</nts:component>