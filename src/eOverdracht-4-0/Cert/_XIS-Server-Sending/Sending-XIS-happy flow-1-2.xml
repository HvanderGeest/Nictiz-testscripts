<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../general/schematron/NictizTestScript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript" nts:scenario="server">
    
    <id value="Sending-xis-1.1-.1"/>
    <version value="stu3-2.0"/>
    <name value="TO DO "/>
    <description value="TO DO"/>
    
    <nts:patientTokenFixture href="eOverdracht-patient-XXX_Altenborg-token.xml"/>
    <nts:fixture id="task-update-fixture" href="resources/resources-specific/eOverdracht-Task-volwassenen-ACCEPTED-Overdrachtbericht-happy-flow.xml"/>
    <nts:includeDateT value="yes"/>
    
    <test id="Scenario1.1-ServeTaskUpdate">
        <name value="Scenario1.1 - Serve eOverdracht-ACCEPTED-Overdrachtsbericht.imput eOverdrachtbericht Task for patient XXX_Altenborg"/>
        <description value="Test XIS server to serve a eOverdracht Task with input.Overdrachtbericht. This Task is found using a search operation and the XIS server should return a Bundle with a single entry."/>
        <nts:include value="xis-scenario1-serveTask-accepted"/>
    </test>
    
   <!--  update served Task met Overdrachtsbericht -->
    
    <test id="Scenario1.1-PerformTaskUpdate">
        <name value="Scenario3.1 - Handle update to eOverdracht Task with update Overdrachtbericht"/>
        <description value="Test XIS server to handle an update to the eOverdracht Task with status 'accepted' and input Overdrachtbericht. This will be an update operation where the original Task is sent, with only the status element and input element changed."/>
        <nts:include value="xis-operation-updateTask-overdrachtbericht"/>
    </test>
    
    <!--  Recieve Updated Task -->
    
    <test id="Scenario1.1-RecieveTaskUpdate-Completed">
        <name value="Scenario3.1 - Handle update to eOverdracht Task with status completed"/>
        <description value="Test XIS server to handle an update to the eOverdracht Task with status 'Completed'. This will be an update operation where the original Task is sent, with only the status element changed."/>
        <nts:include value="test-handleTaskUpdate">
            <nts:with-parameter name="expected-status" value="completed"/>
            <nts:with-parameter name="task-update-fixture" value="resources/resources-specific/eOverdracht-Task-volwassenen-COMPLETED-Overdrachtbericht-happy-flow.xml"/>
        </nts:include>
    </test>
    
    </TestScript>
